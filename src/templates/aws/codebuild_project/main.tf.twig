resource "aws_codebuild_project" "{{ name }}" {
  name          = "${var.codebuild_project_name}"
  description   = "${var.codebuild_project_description}"

  source {
    type            = "${var.codebuild_project_source_type}"
    location        = "${var.codebuild_project_source_location}"
    git_clone_depth = "${var.codebuild_project_source_git_clone_depth}"
  }

  environment {
    image                = "${var.codebuild_project_environment_image}"
    compute_type         = "${var.codebuild_project_environment_compute_type}"
    type                 = "${var.codebuild_project_environment_type}"
    environment_variable = ["${var.codebuild_project_environment_variable}"]
    privileged_mode      = "${var.codebuild_project_environment_privileged_mode}"
  }

  badge_enabled = "${var.codebuild_project_badge_enabled}"
  build_timeout = "${var.codebuild_project_build_timeout}"
  service_role  = "arn:aws:iam::${var.account_id}:role/${var.codebuild_project_service_role}"

  artifacts {
    type           = "${var.codebuild_project_artifacts_type}"
    name           = "${var.codebuild_project_artifacts_name}"
    namespace_type = "${var.codebuild_project_artifacts_namespace_type}"
    packaging      = "${var.codebuild_project_artifacts_packaging}"
  }

  cache {
    type     = "${var.codebuild_project_cache_type}"
    location = "${var.codebuild_project_cache_location}"
  }

  vpc_config {
    vpc_id             = "${var.codebuild_project_vpc_config_vpc_id}"
    subnets            = ["${var.codebuild_project_vpc_config_subnets}"]
    security_group_ids = ["${var.codebuild_project_vpc_config_security_group_ids}"]
  }

  tags = "${merge(var.default_tags, var.custom_tags)}"
}