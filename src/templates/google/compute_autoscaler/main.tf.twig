resource "google_compute_autoscaler" "{{ name }}" {
  name        = "${var.google_compute_autoscaler_name}"
  zone        = "${var.google_compute_autoscaler_zone}"
  target      = "${var.google_compute_autoscaler_target}"
  description = "${var.google_compute_autoscaler_description}"
  project     = "${var.google_project_id}"

  autoscaling_policy = {
    max_replicas    = "${var.google_compute_autoscaler_policy_max_replicas}"
    min_replicas    = "${var.google_compute_autoscaler_policy_min_replicas}"
    cooldown_period = "${var.google_compute_autoscaler_policy_cooldown_period}"

    cpu_utilization {
      target = "${var.google_compute_autoscaler_policy_cpu_utilization_target}"
    }
  }
}
